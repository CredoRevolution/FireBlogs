{"version":3,"file":"js/971.b2b7782e.js","mappings":"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","sources":["webpack://fireblogss/./src/views/CreatePost.vue","webpack://fireblogss/src/views/CreatePost.vue","webpack://fireblogss/./src/views/CreatePost.vue?d0a7","webpack://fireblogss/./src/views/CreatePost.vue?123a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"create-post\"},[_c('BlogCoverPreview',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.$store.state.blogPhotoPreview),expression:\"this.$store.state.blogPhotoPreview\"}]}),_c('Loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}]}),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"err-message\",class:{ invisible: !_vm.error }},[_c('p',[_c('span',[_vm._v(\"Error:\")]),_vm._v(_vm._s(this.errorMsg))])]),_c('div',{staticClass:\"blog-info\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.blogTitle),expression:\"blogTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Enter Blog Title\"},domProps:{\"value\":(_vm.blogTitle)},on:{\"input\":function($event){if($event.target.composing)return;_vm.blogTitle=$event.target.value}}}),_c('div',{staticClass:\"upload-file\"},[_c('label',{attrs:{\"for\":\"blog-photo\"}},[_vm._v(\"Upload Cover Photo\")]),_c('input',{ref:\"blogPhoto\",attrs:{\"type\":\"file\",\"id\":\"blog-photo\",\"accept\":\".png, .jpg, ,jpeg\"},on:{\"change\":_vm.fileChange}}),_c('button',{staticClass:\"preview\",class:{ 'button-inactive': !this.$store.state.blogPhotoFileURL },on:{\"click\":_vm.openPreview}},[_vm._v(\" Preview Photo \")]),_c('span',[_vm._v(\"File Chosen: \"+_vm._s(this.$store.state.blogPhotoName))])])]),_c('div',{staticClass:\"editor\"},[_c('vue-editor',{attrs:{\"editorOptions\":_vm.editorSettings,\"useCustomImageHandler\":\"\"},on:{\"image-added\":_vm.imageHandler},model:{value:(_vm.blogHTML),callback:function ($$v) {_vm.blogHTML=$$v},expression:\"blogHTML\"}})],1),_c('div',{staticClass:\"blog-actions\"},[_c('button',{on:{\"click\":_vm.uploadBlog}},[_vm._v(\"Publish Blog\")]),_c('router-link',{staticClass:\"router-button\",attrs:{\"to\":{ name: 'BlogPreview' }}},[_vm._v(\"Post Preview\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"create-post\">\r\n    <BlogCoverPreview v-show=\"this.$store.state.blogPhotoPreview\" />\r\n    <Loading v-show=\"loading\" />\r\n    <div class=\"container\">\r\n      <div :class=\"{ invisible: !error }\" class=\"err-message\">\r\n        <p><span>Error:</span>{{ this.errorMsg }}</p>\r\n      </div>\r\n      <div class=\"blog-info\">\r\n        <input type=\"text\" placeholder=\"Enter Blog Title\" v-model=\"blogTitle\" />\r\n        <div class=\"upload-file\">\r\n          <label for=\"blog-photo\">Upload Cover Photo</label>\r\n          <input type=\"file\" ref=\"blogPhoto\" id=\"blog-photo\" @change=\"fileChange\" accept=\".png, .jpg, ,jpeg\" />\r\n          <button @click=\"openPreview\" class=\"preview\" :class=\"{ 'button-inactive': !this.$store.state.blogPhotoFileURL }\">\r\n            Preview Photo\r\n          </button>\r\n          <span>File Chosen: {{ this.$store.state.blogPhotoName }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"editor\">\r\n        <vue-editor :editorOptions=\"editorSettings\" v-model=\"blogHTML\" useCustomImageHandler @image-added=\"imageHandler\" />\r\n      </div>\r\n      <div class=\"blog-actions\">\r\n        <button @click=\"uploadBlog\">Publish Blog</button>\r\n        <router-link class=\"router-button\" :to=\"{ name: 'BlogPreview' }\">Post Preview</router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BlogCoverPreview from \"../components/BlogCoverPreview\";\r\nimport Loading from \"../components/Loading\";\r\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\r\nimport {collection, addDoc, getDoc, doc, updateDoc} from \"firebase/firestore\"\r\nimport db from \"../firebase/firebaseInit\";\r\nimport Quill from \"quill\";\r\nwindow.Quill = Quill;\r\nconst ImageResize = require(\"quill-image-resize-module\").default;\r\nQuill.register(\"modules/imageResize\", ImageResize);\r\nexport default {\r\n  name: \"CreatePost\",\r\n  data() {\r\n    return {\r\n      file: null,\r\n      error: null,\r\n      errorMsg: null,\r\n      loading: null,\r\n      editorSettings: {\r\n        modules: {\r\n          imageResize: {},\r\n        },\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    BlogCoverPreview,\r\n    Loading,\r\n  },\r\n  methods: {\r\n    fileChange() {\r\n      this.file = this.$refs.blogPhoto.files[0];\r\n      const fileName = this.file.name;\r\n      this.$store.commit(\"fileNameChange\", fileName);\r\n      this.$store.commit(\"createFileURL\", URL.createObjectURL(this.file));\r\n    },\r\n\r\n    openPreview() {\r\n      this.$store.commit(\"openPhotoPreview\");\r\n    },\r\n\r\n    imageHandler(file, Editor, cursorLocation, resetUploader) {\r\n      const storage = getStorage();\r\n      const storageRef = ref(storage, `documents/blogPostPhotos/${file.name}`);\r\n      const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n      uploadTask.on(\r\n          \"state_changed\",\r\n          (snapshot) => {\r\n            console.log(snapshot);\r\n          },\r\n          (err) => {\r\n            console.log(err);\r\n          },\r\n          async () => {\r\n            const downloadURL = await getDownloadURL(storageRef);\r\n            Editor.insertEmbed(cursorLocation, \"image\", downloadURL);\r\n            resetUploader();\r\n          }\r\n      );\r\n    },\r\n    uploadBlog() {\r\n      if(this.blogTitle.length !== 0 && this.blogHTML.length !== 0) {\r\n        if(this.file){\r\n          this.loading = true;\r\n          const storage = getStorage();\r\n          const storageRef = ref(storage, `documents/blogCoverPhotos/${this.blogCoverPhotoName}`);\r\n\r\n          const uploadTask = uploadBytesResumable(storageRef, this.file);\r\n          uploadTask.on(\r\n              \"state_changed\",\r\n              (snapshot) => {\r\n                console.log('snapshot');\r\n              },\r\n              (err) => {\r\n                console.log(err);\r\n              },\r\n              async () => {\r\n                const downloadURL = await getDownloadURL(storageRef);\r\n                const timestamp = await Date.now();\r\n                const collectionRef = collection(db, \"blogPosts\")\r\n                await addDoc(collectionRef, {\r\n                  blogCoverPhoto: downloadURL,\r\n                  blogCoverPhotoName: this.blogCoverPhotoName,\r\n                  blogTitle: this.blogTitle,\r\n                  blogHTML: this.blogHTML,\r\n                  blogId: timestamp,\r\n                  profileId: this.profileId,\r\n                  date: timestamp\r\n                })\r\n                await this.$store.dispatch(\"getPosts\");\r\n                this.loading = false;\r\n                this.$router.push({ name: \"ViewBlog\", params: { blogid: timestamp } });\r\n              }\r\n\r\n          )\r\n        }\r\n        this.error = true;\r\n        this.errorMsg = \"Please ensure you uploaded a blog cover photo!\";\r\n        setTimeout(()=>{\r\n          this.error = false;\r\n          this.errorMsg = null;\r\n        }, 5000)\r\n      }\r\n\r\n      this.error = true;\r\n      this.errorMsg = \"Please ensure Blog Title & Blog Post has been filled!\";\r\n      setTimeout(()=>{\r\n        this.error = false;\r\n        this.errorMsg = null;\r\n      }, 5000)\r\n    }\r\n\r\n  },\r\n  computed: {\r\n    profileId() {\r\n      return this.$store.state.profileId;\r\n    },\r\n    blogCoverPhotoName() {\r\n      return this.$store.state.blogPhotoName;\r\n    },\r\n    blogTitle: {\r\n      get() {\r\n        return this.$store.state.blogTitle;\r\n      },\r\n      set(payload) {\r\n        this.$store.commit(\"updateBlogTitle\", payload);\r\n      },\r\n    },\r\n    blogHTML: {\r\n      get() {\r\n        return this.$store.state.blogHTML;\r\n      },\r\n      set(payload) {\r\n        this.$store.commit(\"newBlogPost\", payload);\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.create-post {\r\n  position: relative;\r\n  height: 100%;\r\n\r\n  button {\r\n    margin-top: 0;\r\n  }\r\n\r\n  .router-button {\r\n    text-decoration: none;\r\n    color: #fff;\r\n  }\r\n\r\n  label,\r\n  button,\r\n  .router-button {\r\n    transition: 0.5s ease-in-out all;\r\n    align-self: center;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    border-radius: 20px;\r\n    padding: 12px 24px;\r\n    color: #fff;\r\n    background-color: #303030;\r\n    text-decoration: none;\r\n\r\n    &:hover {\r\n      background-color: rgba(48, 48, 48, 0.7);\r\n    }\r\n  }\r\n\r\n  .container {\r\n    position: relative;\r\n    height: 100%;\r\n    padding: 10px 25px 60px;\r\n  }\r\n\r\n  // error styling\r\n  .invisible {\r\n    opacity: 0 !important;\r\n  }\r\n\r\n  .err-message {\r\n    width: 100%;\r\n    padding: 12px;\r\n    border-radius: 8px;\r\n    color: #fff;\r\n    margin-bottom: 10px;\r\n    background-color: #303030;\r\n    opacity: 1;\r\n    transition: 0.5s ease all;\r\n\r\n    p {\r\n      font-size: 14px;\r\n    }\r\n\r\n    span {\r\n      font-weight: 600;\r\n    }\r\n  }\r\n\r\n  .blog-info {\r\n    display: flex;\r\n    margin-bottom: 32px;\r\n\r\n    input:nth-child(1) {\r\n      min-width: 300px;\r\n    }\r\n\r\n    input {\r\n      transition: 0.5s ease-in-out all;\r\n      padding: 10px 4px;\r\n      border: none;\r\n      border-bottom: 1px solid #303030;\r\n\r\n      &:focus {\r\n        outline: none;\r\n        box-shadow: 0 1px 0 0 #303030;\r\n      }\r\n    }\r\n\r\n    .upload-file {\r\n      flex: 1;\r\n      margin-left: 16px;\r\n      position: relative;\r\n      display: flex;\r\n\r\n      input {\r\n        display: none;\r\n      }\r\n\r\n      .preview {\r\n        margin-left: 16px;\r\n        text-transform: initial;\r\n      }\r\n\r\n      span {\r\n        font-size: 12px;\r\n        margin-left: 16px;\r\n        align-self: center;\r\n      }\r\n    }\r\n  }\r\n\r\n  .editor {\r\n    height: 60vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    .quillWrapper {\r\n      position: relative;\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n    }\r\n\r\n    .ql-container {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n      overflow: scroll;\r\n    }\r\n\r\n    .ql-editor {\r\n      padding: 20px 16px 30px;\r\n    }\r\n  }\r\n\r\n  .blog-actions {\r\n    margin-top: 32px;\r\n\r\n    button {\r\n      margin-right: 16px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CreatePost.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CreatePost.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CreatePost.vue?vue&type=template&id=5c55cff1\"\nimport script from \"./CreatePost.vue?vue&type=script&lang=js\"\nexport * from \"./CreatePost.vue?vue&type=script&lang=js\"\nimport style0 from \"./CreatePost.vue?vue&type=style&index=0&id=5c55cff1&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","$store","state","blogPhotoPreview","expression","loading","class","invisible","error","_v","_s","errorMsg","blogTitle","attrs","domProps","on","$event","target","composing","ref","fileChange","blogPhotoFileURL","openPreview","blogPhotoName","editorSettings","imageHandler","model","blogHTML","callback","$$v","uploadBlog","staticRenderFns","window","Quill","ImageResize","require","data","file","modules","imageResize","components","BlogCoverPreview","Loading","methods","$refs","blogPhoto","files","fileName","commit","URL","createObjectURL","Editor","cursorLocation","resetUploader","storage","getStorage","storageRef","uploadTask","uploadBytesResumable","snapshot","console","log","err","downloadURL","getDownloadURL","insertEmbed","length","blogCoverPhotoName","timestamp","Date","now","collectionRef","collection","db","addDoc","blogCoverPhoto","blogId","profileId","date","dispatch","$router","push","params","blogid","setTimeout","computed","get","set","payload","component"],"sourceRoot":""}